# 49ì¥. Babelê³¼ Webpackì„ ì´ìš©í•œ ES6+/ES.NEXT ê°œë°œ í™˜ê²½ êµ¬ì¶•

---

# 49.1 Babel

## Babelì´ë€?

â†’ **ìµœì‹  ECMAScript(ES6+) ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ êµ¬í˜• ë¸Œë¼ìš°ì €ë‚˜ í™˜ê²½ì—ì„œë„ ë™ì‘í•  ìˆ˜ ìˆëŠ” í•˜ìœ„ ë²„ì „(ì£¼ë¡œ ES5)ìœ¼ë¡œ ë³€í™˜(Transpile)í•´ì£¼ëŠ” ëŒ€í‘œì ì¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì»´íŒŒì¼ëŸ¬**

ë” ê¶ê¸ˆí•˜ë‹¤ë©´? â†’ [Next.js ê³µì‹ë¬¸ì„œì—ì„œ ë§í•´ì£¼ëŠ” Babel](https://nextjs-ko.org/docs/pages/building-your-application/configuring/babel) ì„ ì°¸ê³ í•´ë³´ì„¸ìš” ğŸ§‘â€ğŸ’»ğŸ§‘â€ğŸ’»

## 49.1.1 Babel ì„¤ì¹˜

- `npm`ì„ ì‚¬ìš©í•´ Babel ì„¤ì¹˜

  ```bash
  # í”„ë¡œì íŠ¸ í´ë” ìƒì„±
  $ mkdir esnext-project && cd esnext-project
  # package.json ìƒì„±
  $ npm init -y
  # babel-core, babel-cli ì„¤ì¹˜
  $ npm install --save-dev @babel/core @babel/cli
  ```

  - ì„¤ì¹˜í–ˆë‹¤ë©´ package.json íŒŒì¼ì—ëŠ” ì•„ë˜ êµ¬ì¡° + @ ê°€ ì‘ì„±ë˜ì–´ ìˆì„ ê²ƒ!
    ```json
    {
    	"name": "esnext-project",
    	"version": "1.0.0"
    	"devDependencies": {
    		"@babel/cli": "^7.10.3",
    		"@babel/core": "^7.10.3"
    	}
    	// + @ ...
    }
    ```

- Babel, Webpack, í”ŒëŸ¬ê·¸ì¸ì˜ ë²„ì „ì€ ì—…ê·¸ë ˆì´ë“œ ë¹ˆë„ê°€ ë†’ê¸° ë•Œë¬¸ì— ì›í•˜ëŠ” íŠ¹ì • ë²„ì „ì„ ë‹¤ìš´ë°›ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•˜ì!
  ```bash
  #ë²„ì „ ì§€ì • ì„¤ì¹˜
  npm install --save-dev @babel/core@7.10.3 @babel/cli@7.10.3
  ```

## 49.1.2 Babel í”„ë¦¬ì…‹ ì„¤ì¹˜ì™€ babel.config.json ì„¤ì • íŒŒì¼ ì‘ì„±

Babel ì‚¬ìš©í•˜ë ¤ë©´ `@babel/preset-env`ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

â†’ í•¨ê»˜ ì‚¬ìš©ë˜ì–´ì•¼ í•˜ëŠ” Babel í”ŒëŸ¬ê·¸ì¸ì„ ëª¨ì•„ë‘” ê²ƒìœ¼ë¡œ, â€˜Babel í”„ë¦¬ì…‹â€™ì´ë¼ê³  ë¶€ë¦„

- Babelì´ ì œê³µí•˜ëŠ” ê³µì‹ Babel í”„ë¦¬ì…‹
  - `@babel/preset-env`
  - `@babel/preset-flow`
  - `@babel/preset-react`
  - `@babel/preset- typescript`

ì´ ì¤‘ `@babel/preset-env`ëŠ” í•„ìš”í•œ í”ŒëŸ¬ê·¸ì¸ë“¤ì„ í”„ë¡œì íŠ¸ ì§€ì› í™˜ê²½ì— ë§ì¶° ë™ì ìœ¼ë¡œ ê²°ì •í•´ì£¼ëŠ” í”„ë¦¬ì…‹

- ì„¤ì¹˜ ëª…ë ¹ì–´ëŠ” ì•„ë˜ì™€ ê°™ê³ , ì„¤ì¹˜ ì™„ë£Œ í›„ `package.json` íŒŒì¼ì€ ì•„ë˜ì™€ ê°™ë‹¤!
  ```bash
  $ npm install --save-dev @babel/preset-env
  ```
  ```json
  {
    "name": "esnext-project",
    "version": "1.0.0",
    "devDependencies": {
      "@babel/cli": "^7.10.3",
      "@babel/core": "^7.10.3",
      "@babel/preset-env": "^7.10.3"
    }
  }
  ```
- ì„¤ì¹˜ ì™„ë£Œ í›„ í”„ë¡œì íŠ¸ ë£¨íŠ¸ í´ë”ì— `babel.config.json` ì„¤ì • íŒŒì¼ì„ ìƒì„±í•˜ê³  ì•„ë˜ì™€ ê°™ì´ ì‘ì„±ì„ í•˜ë©´?
  ```json
  {
    "presets": ["@babel/preset-env"]
  }
  ```
- ì§€ê¸ˆ ì„¤ì¹˜í•œ `@babel/preset-env`ë¥¼ ì‚¬ìš©í•˜ê² ë‹¤ëŠ” ì˜ë¯¸!

## 49.1.3 íŠ¸ëœìŠ¤íŒŒì¼ë§

### Q. íŠ¸ëœìŠ¤íŒŒì¼ë§(Transpiling)ì´ë€?

- í•˜ë‚˜ì˜ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¡œ ì‘ì„±ëœ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¹„ìŠ·í•œ ìˆ˜ì¤€ì˜ ë‹¤ë¥¸ ê³ ê¸‰ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •
- 'Translator + Compiler'ì˜ í•©ì„±ì–´ì¸ íŠ¸ëœìŠ¤íŒŒì¼ëŸ¬(Transpiler)ë¥¼ í†µí•´ ìˆ˜í–‰ë˜ë©°, ì£¼ë¡œ ë¸Œë¼ìš°ì € í˜¸í™˜ì„±ì„ ìœ„í•´ ìµœì‹  ì½”ë“œë¥¼ ì˜›ë‚  ë°©ì‹ì˜ ì½”ë“œë¡œ ë°”ê¿€ ë•Œ ì‚¬ìš©ëœë‹¤!
- ì£¼ë¡œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ES6+ë¥¼ êµ¬ë²„ì „ìœ¼ë¡œ ë³€í™˜í•  ë•Œ ì‚¬ìš©

Babelì„ CLI ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê±´ ë¹„íš¨ìœ¨ì  â†’ `npm scripts`ì— Babel CLI ëª…ë ¹ì–´ë¥¼ ë“±ë¡í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê±¸ ê¶Œì¥

```json
{
	"name": "esnext-project",
	"version": "1.0.0",
	"scripts": {
		"build": "babel src/js -w -d dist/js"
	}
	"devDependencies": {
		"@babel/cli": "^7.10.3",
		"@babel/core": "^7.10.3",
		"@babel/present-env": "^7.10.3"
	}
}
```

- ìœ„ `npm scripts`ì˜ `build`ëŠ” `src/js` í´ë”(íƒ€ê¹ƒ í´ë”)ì— ìˆëŠ” ëª¨ë“  JS íŒŒì¼ë“¤ì„ íŠ¸ëœìŠ¤íŒŒì¼ë§ í›„ , ê²°ê³¼ë¬¼ì„ `dist/js` í´ë”ì— ì €ì¥í•œë‹¤ëŠ” ì˜ë¯¸
- `-w` : íƒ€ê¹ƒ í´ë”ì— ìˆëŠ” ëª¨ë“  JS íŒŒì¼ë“¤ì˜ ë³€ê²½ì„ ê°ì§€í•˜ì—¬ ìë™ìœ¼ë¡œ íŠ¸ëœìŠ¤íŒŒì¼í•œë‹¤. (`â€”-watch` ì˜µì…˜ì˜ Abbr.)
- `-d` : íŠ¸ëœìŠ¤íŒŒì¼ë§ëœ ê²°ê³¼ë¬¼ì´ ì €ì¥ëœ í´ë”ë¥¼ ì§€ì¥í•œë‹¤. ë§Œì•½ ì§€ì •ëœ í´ë”ê°€ ì—†ë‹¤ë©´ ìë™ìƒì„± (`â€”-out-dir` ì˜µì…˜ì˜ Abbr.)

```jsx
// src/js/lib.js
export const pi = Math.PI; // ES6 ëª¨ë“ˆ

export function power(x, y) {
  return x ** y; // ES7: ì§€ìˆ˜ ì—°ì‚°ì
}

// ES6 í´ë˜ìŠ¤
export class Foo {
  #private = 10; // stage 3: í´ë˜ìŠ¤ í•„ë“œì˜ ì •ì˜ ì œì•ˆ

  foo() {
    // stage 4: ê°ì²´ Rest/Spread í”„ë¡œí¼í‹° ì œì•ˆ
    const { a, b, ...x } = { ...{ a: 1, b: 2 }, c: 3, d: 4 };
    return { a, b, x };
  }

  bar() {
    return this.#private;
  }
}
```

```jsx
// src/js/main.js
import {.pi, power, Foo } from './lib';

console.log(pi);
console.log(power(pi, pi));

const f = new Foo();
console.log(f.foo());
console.log(f.bar());
```

í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ íŠ¸ëœìŠ¤íŒŒì¼ë§ì„ ì‹¤í–‰í•œë‹¤.

```bash
$ npm run build

> esnext-project@1.0.0 build /Users/leeungmo/Desktop/esnext-project
> babel src/js -w -d dist/js

SyntaxError: /Users/leeungmo/Desktop/esnext-project/src/js/lib.js: Supprot for the experi-
mental syntax 'classPrivateProperties' isn't currently enabled (10:3):

	 9| export class Foo {
> 10|    #private = 10;
	  |    ^
	11|
	12|    foo() {
	13|       ...

...
```

[2021ë…„ 1ì›” ê¸°ì¤€]

í˜„ì¬ TC39 í”„ë¡œì„¸ìŠ¤ì˜ stage 3(candidate) ë‹¨ê³„ì— ìˆëŠ” `private` í•„ë“œ ì •ì˜ ì œì•ˆì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•œ ê²ƒ!

â†’ ì´ê²ƒì€ `@babel/preset-env`ê°€ í˜„ì¬ ì œì•ˆ ë‹¨ê³„ì— ìˆëŠ” ì‚¬ì–‘ì— ëŒ€í•œ í”ŒëŸ¬ê·¸ì¸ì„ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë°œìƒí•œ ì—ëŸ¬

â†’ ë”°ë¼ì„œ í˜„ì¬ ì œì•ˆ ë‹¨ê³„ì— ìˆëŠ” ì‚¬ì–‘ì„ íŠ¸ëœìŠ¤íŒŒì¼ë§í•˜ë ¤ë©´ ë³„ë„ì˜ í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•˜ë©´ í•´ê²°ì´ ëœë‹¤ ~

[2026ë…„ í˜„ì¬ ê¸°ì¤€]

ê³¼ê±° TC39 í”„ë¡œì„¸ìŠ¤ì˜ ì œì•ˆ ë‹¨ê³„ì— ìˆì—ˆë˜ `private` í•„ë“œ ì •ì˜(#)ëŠ” ì´ë¯¸ ES2022(ES13) ì •ì‹ ì‚¬ì–‘ìœ¼ë¡œ í™•ì •ë¨!

â†’ ë”°ë¼ì„œ ìµœì‹  ë²„ì „ì˜ `@babel/preset-env`ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ë³„ë„ì˜ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜ ì—†ì´ë„ ê¸°ë³¸ì ìœ¼ë¡œ íŠ¸ëœìŠ¤íŒŒì¼ë§ì„ ì§€ì›í•œë‹¤ë„¤ìš” ğŸ˜—

## 49.1.4 Babel í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜

ì„¤ì¹˜ê°€ í•„ìš”í•œ Babel í”ŒëŸ¬ê·¸ì¸ì€ Babel í™ˆí˜ì´ì§€ ìƒë‹¨ ë©”ë‰´ì˜ â€˜Searchâ€™ë€ì— ì œì•ˆ ì‚¬ì–‘ì˜ ì´ë¦„ì„ ì…ë ¥í•˜ë©´ í•´ë‹¹ í”ŒëŸ¬ê·¸ì¸ì„ ê²€ìƒ‰í•  ìˆ˜ ìˆë‹¤.

â†’ ì˜ˆì œì—ì„œëŠ” í´ë˜ìŠ¤ í•„ë“œ ì •ì˜ ì œì•ˆì„ ê²€ìƒ‰í•˜ê¸° ìœ„í•´ â€œclass fieldâ€ë¥¼ ì…ë ¥í•œë‹¤.

â†’ [Babel í™ˆí˜ì´ì§€ ë°”ë¡œê°€ê¸°](https://babeljs.io/) ğŸ§‘â€ğŸ’»ğŸ§‘â€ğŸ’»

![image.png](/images/ch49/49_img_1.png)

ê²€ìƒ‰ëœ Babel í”ŒëŸ¬ê·¸ì¸ ì¤‘ì—ì„œ `public/private` í´ë˜ìŠ¤ í•„ë“œë¥¼ ì§€ì›í•˜ëŠ” `@babel/plugin-proposal-class-properties`ë¥¼ ì„¤ì¹˜í•œë‹¤.

```bash
$ npm install --save-dev @babel/plugin-proposal-class-properties
```

ì„¤ì¹˜ ì´í›„ `package.json` íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

```json
{
	"name": "esnext-project",
	"version": "1.0.0",
	"scripts": {
		"build": "babel src/js -w -d dist/js"
	}
	"devDependencies": {
		"@babel/cli": "^7.10.3",
		"@babel/core": "^7.10.3",
		"@babel/plugin-proposal-class-properties": "^7.10.1"
		"@babel/present-env": "^7.10.3"
	}
}
```

ì„¤ì¹˜í•œ í”ŒëŸ¬ê·¸ì¸ì€ `babel.config.json` ì„¤ì • íŒŒì¼ì— ì¶”ê°€í•´ì•¼ í•œë‹¤. `babel.config.json` ì„¤ì • íŒŒì¼ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•œë‹¤.

```json
{
	"presets": ["@babel/preset-env"]
	"plugins": ["@babel/plugin-proposal-class-properties"]
}
```

ë‹¤ì‹œ í„°ë¯¸ë„ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ íŠ¸ëœìŠ¤íŒŒì¼ë§ì„ ì‹¤í–‰í•´ë³´ì.

```bash
$ npm run build

> esnext-project@1.0.0 build /Users/leeungmo/Desktop/esnext-project
> babel src/js -w -d dist/js

Sucessfully complied 2 files with Babel (954ms)
```

íŠ¸ëœìŠ¤íŒŒì¼ë§ì— ì„±ê³µí•˜ë©´ í”„ë¡œì íŠ¸ ë£¨íŠ¸ í´ë”ì— `dist/js` í´ë”ê°€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ê³  íŠ¸ëœìŠ¤íŒŒì¼ë§ëœ `main.js`ì™€ `lib.js`ê°€ ì €ì¥ëœë‹¤.

íŠ¸ëœìŠ¤íŒŒì¼ë§ëœ `main.js`ë¥¼ ì‹¤í–‰í•´ë³´ë©´ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```bash
$ node dist/js/main

3.141592653589793
36.4621596072079
{ a: 1, b: 2, x: { c:3, d:4 } }
10
```

## 49.1.5 ë¸Œë¼ìš°ì €ì—ì„œ ëª¨ë“ˆ ë¡œë”© í…ŒìŠ¤íŠ¸

ì•ì—ì„œ `main.js`ì™€ `lib.js` ëª¨ë“ˆì„ íŠ¸ëœìŠ¤íŒŒì¼ë§í•˜ì—¬ ES5 ì‚¬ì–‘ìœ¼ë¡œ ë³€í™˜ëœ `main.js`ë¥¼ ì‹¤í–‰í•œ ê²°ê³¼, ë¬¸ì œ ì—†ì´ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í–ˆë‹¤. ES6+ì—ì„œ ìƒˆë¡­ê²Œ ì¶”ê°€ëœ ê¸°ëŠ¥ì€ ë¬¼ë¡  í˜„ì¬ ì œì•ˆ ìƒíƒœì— ìˆëŠ” **"í´ë˜ìŠ¤ í•„ë“œ ì •ì˜ ì œì•ˆ"**ë„ ES5ë¡œ íŠ¸ëœìŠ¤íŒŒì¼ë§ë˜ì—ˆê³ , ES6 ëª¨ë“ˆì˜ `import`ì™€ `export` í‚¤ì›Œë“œë„ íŠ¸ëœìŠ¤íŒŒì¼ë§ë˜ì–´ ëª¨ë“ˆ ê¸°ëŠ¥ë„ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í–ˆë‹¤.

í•˜ì§€ë§Œ ìœ„ ì˜ˆì œì˜ ëª¨ë“ˆ ê¸°ëŠ¥ì€ `Node.js` í™˜ê²½ì—ì„œ ë™ì‘í•œ ê²ƒì´ê³ , Babelì´ ëª¨ë“ˆì„ íŠ¸ëœìŠ¤íŒŒì¼ë§í•œ ê²ƒë„ `Node.js`ê°€ ê¸°ë³¸ ì§€ì›í•˜ëŠ” CommonJS ë°©ì‹ì˜ ëª¨ë“ˆ ë¡œë”© ì‹œìŠ¤í…œì— ë”°ë¥¸ ê²ƒì´ë‹¤. ë‹¤ìŒì€ `src/js/main.js`ê°€ Babelì— ì˜í•´ íŠ¸ëœìŠ¤íŒŒì¼ë§ëœ ê²°ê³¼ë‹¤.

```jsx
// dist/js/main.js
'use strict';

var _lib = require('./lib');

// src/js/main.js
console.log(_lib.pi);
console.log((0, _lib.power)(_lib.pi, _lib.pi));
var f = new _lib.Foo();
console.log(f.foo());
console.log(f.bar());
```

ë¸Œë¼ìš°ì €ëŠ” CommonJS ë°©ì‹ì˜ `require` í•¨ìˆ˜ë¥¼ ì§€ì›í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ(~~í˜„ì¬ê¹Œì§€ë„â€¦~~), ìœ„ì—ì„œ íŠ¸ëœìŠ¤íŒŒì¼ë§ëœ ê²°ê³¼ë¥¼ ê·¸ëŒ€ë¡œ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤â€¦ **why?**

- CommonJS ë°©ì‹ â†’ ë™ê¸° ë°©ì‹. íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ëª¨ë“ˆì„ ì¦‰ì‹œ ë¶ˆëŸ¬ì˜¤ë¯€ë¡œ ì„œë²„ ì‚¬ì´ë“œ(`Node.js`)ëŠ” ë‚´ ì»´í“¨í„°ì˜ í•˜ë“œë””ìŠ¤í¬ì—ì„œ íŒŒì¼ì„ ì½ìœ¼ë¯€ë¡œ ì†ë„ê°€ ë§¤ìš° ë¹¨ë¼ ì´ ë°©ì‹ì´ ê°€ëŠ¥!
- ë¸Œë¼ìš°ì € â†’ íŒŒì¼ì„ **ë„¤íŠ¸ì›Œí¬**ë¥¼ í†µí•´ ë°›ì•„ì™€ì•¼ í•˜ëŠ”ë° `require`ë¥¼ ë™ê¸° ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤ë©´ ì—¬ëŸ¬ ëª¨ë“ˆì„ ë‹¤ìš´ë¡œë“œí•˜ëŠ” ë™ì•ˆ ë¸Œë¼ìš°ì € í™”ë©´ì´ ë©ˆì¶°ë²„ë¦¬ëŠ” â€˜ë¸”ë¡œí‚¹â€™ ë¬¸ì œê°€ ë°œìƒ

í”„ë¡œì íŠ¸ ë£¨íŠ¸ í´ë”ì— ë‹¤ìŒê³¼ ê°™ì´ `index.html`ì„ ì‘ì„±í•˜ì—¬ íŠ¸ëœìŠ¤íŒŒì¼ë§ëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰í•´ ë³´ì.

â†’ [require í•¨ìˆ˜ ë” ì•Œì•„ë³´ê¸°](https://nodejs.org/en/knowledge/getting-started/what-is-require) ğŸ§‘â€ğŸ’»ğŸ§‘â€ğŸ’»

```html
<!DOCTYPE html>
<html>
  <body>
    <script src="dist/js/lib.js"></script>
    <script src="dist/js/main.js"></script>
  </body>
</html>
```

ìœ„ HTML íŒŒì¼ì„ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

```bash
Uncaught ReferenceError: exports is not defined
	at lib.js:3
main.js:3 Uncaught ReferenceError: require is not defined
	at main.js:3
```

ë¸Œë¼ìš°ì €ì˜ ES6 ëª¨ë“ˆ(ESM)ì„ ì‚¬ìš©í•˜ë„ë¡ Babelì„ ì„¤ì •í•  ìˆ˜ë„ ìˆìœ¼ë‚˜, ì•ì„œ ì„¤ëª…í•œ ë°”ì™€ ê°™ì´ ESMì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ë¬¸ì œê°€ ìˆë‹¤. **Webpack**ì„ í†µí•´ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•´ ë³´ì.

---

# 49.2 Webpack

**Webpack**ì€ ì˜ì¡´ ê´€ê³„ì— ìˆëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸, CSS, ì´ë¯¸ì§€ ë“±ì˜ ë¦¬ì†ŒìŠ¤ë“¤ì„ í•˜ë‚˜(ë˜ëŠ” ì—¬ëŸ¬ ê°œ)ì˜ íŒŒì¼ë¡œ ë²ˆë“¤ë§í•˜ëŠ” ëª¨ë“ˆ ë²ˆë“¤ëŸ¬ë‹¤. **Webpack**ì„ ì‚¬ìš©í•˜ë©´ ì˜ì¡´ ëª¨ë“ˆì´ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ ë²ˆë“¤ë§ë˜ë¯€ë¡œ ë³„ë„ì˜ ëª¨ë“ˆ ë¡œë”ê°€ í•„ìš”ì—†ë‹¤. ê·¸ë¦¬ê³  ì—¬ëŸ¬ ê°œì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ í•˜ë‚˜ë¡œ ë²ˆë“¤ë§í•˜ë¯€ë¡œ HTML íŒŒì¼ì—ì„œ `script` íƒœê·¸ë¡œ ì—¬ëŸ¬ ê°œì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ë¡œë“œí•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€ë„ ì‚¬ë¼ì§„ë‹¤.

â†’ [Webpack í™ˆí˜ì´ì§€ ë°”ë¡œê°€ê¸°](https://webpack.js.org/) ğŸ§‘â€ğŸ’»ğŸ§‘â€ğŸ’»

![image.png](/images/ch49/49_img_2.png)

Webpackê³¼ Babelì„ ì´ìš©í•˜ì—¬ ES6+/ES.NEXT ê°œë°œ í™˜ê²½ì„ êµ¬ì¶•í•˜ì—¬ ë³´ì. Webpackì´ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ë²ˆë“¤ë§í•˜ê¸° ì „ì— Babelì„ ë¡œë“œí•˜ì—¬ ES6+/ES.NEXT ì‚¬ì–‘ì˜ ì†ŒìŠ¤ì½”ë“œë¥¼ ES5 ì‚¬ì–‘ì˜ ì†ŒìŠ¤ì½”ë“œë¡œ íŠ¸ëœìŠ¤íŒŒì¼ë§í•˜ëŠ” ì‘ì—…ì„ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í•  ê²ƒì´ë‹¤.

---

## 49.2.1 Webpack ì„¤ì¹˜

í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ **Webpack**ì„ ì„¤ì¹˜í•œë‹¤.

```bash
$ npm install --save-dev webpack webpack-cli
```

ì„¤ì¹˜ê°€ ì™„ë£Œë˜ë©´ `package.json` íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

```json
{
	"name": "esnext-project",
	"version": "1.0.0",
	"scripts": {
		"build": "babel src/js -w -d dist/js"
	}
	"devDependencies": {
		"@babel/cli": "^7.10.3",
		"@babel/core": "^7.10.3",
		"@babel/plugin-proposal-class-properties": "^7.10.1",
		"@babel/present-env": "^7.10.3",
		"webpack": "^4.43.0",
		"webpack-cli": "^3.3.12"
	}
}
```

## 49.2.2 babel-loader ì„¤ì¹˜

**Webpack**ì´ ëª¨ë“ˆì„ ë²ˆë“¤ë§í•  ë•Œ Babelì„ ì‚¬ìš©í•˜ì—¬ ES6+/ES.NEXT ì‚¬ì–‘ì˜ ì†ŒìŠ¤ì½”ë“œë¥¼ ES5 ì‚¬ì–‘ì˜ ì†ŒìŠ¤ì½”ë“œë¡œ íŠ¸ëœìŠ¤íŒŒì¼ë§í•˜ë„ë¡ `babel-loader`ë¥¼ ì„¤ì¹˜í•œë‹¤.

```bash
$ npm install --save-dev babel-loader
```

`npm scripts`ë¥¼ ë³€ê²½í•˜ì—¬ Babel ëŒ€ì‹  **Webpack**ì„ ì‹¤í–‰í•˜ë„ë¡ ìˆ˜ì •í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ `package.json` íŒŒì¼ì˜ scriptsë¥¼ ë³€ê²½í•œë‹¤. ì™„ì„±ëœ `package.json` íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

```json
{
	"name": "esnext-project",
	"version": "1.0.0",
	"scripts": {
		"build": "webpack -w" // ì´ ë¶€ë¶„ì´ ë°”ë€œ
	}
	"devDependencies": {
		"@babel/cli": "^7.10.3",
		"@babel/core": "^7.10.3",
		"@babel/plugin-proposal-class-properties": "^7.10.1",
		"@babel/present-env": "^7.10.3",
		"webpack": "^4.43.0",
		"webpack-cli": "^3.3.12"
	}
}
```

## 49.2.3 webpack.config.js ì„¤ì • íŒŒì¼ ì‘ì„±

`webpack.config.js`: **Webpack**ì´ ì‹¤í–‰ë  ë•Œ ì°¸ì¡°í•˜ëŠ” ì„¤ì • íŒŒì¼

í”„ë¡œì íŠ¸ ë£¨íŠ¸ í´ë”ì— `webpack.config.js` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•œë‹¤.

```jsx
const path = require('path');

module.exports = {
	// entry file
	// https://webpack.js.org/configuration/entry-context/#entry
	entry: './src/js/main.js',
	// ë²ˆë“¤ë§ëœ JS íŒŒì¼ì˜ ì´ë¦„(filename)ê³¼ ì €ì¥ë  ê²½ë¡œ(path)ë¥¼ ì§€ì •
	// https://webpack.js.org/configuration/output/#outputpath
	// https://webpack.js.org/configuration/output/#outputfilename
	output: {
		path: path. resolve(__dirname, 'dist/js'),
		filename: 'bundle.js'
	},
	// https://webpack.js.org/configuration/module
	module: {
		rules: [
			{
				test: 1.js$/,
				include: [
					path.resolve(__dirname, 'src/js')
				],
				exclude: /node_modules/,
				use: {
					loader: 'babel-loader',
					options: {
						presets: ['@babel/preset-env'],
						plugins: ['@babel/plugin-proposal-class-properties']
					}
			}
		]
	},
	devtool: 'source-map',
	// https://webpack.js.org/configuration/mode
	mode: 'development'
};

```

**Webpack**ì„ ì‹¤í–‰í•˜ì—¬ íŠ¸ëœìŠ¤íŒŒì¼ë§ ë° ë²ˆë“¤ë§ì„ ì‹¤í–‰í•´ë³´ë©´ íŠ¸ëœìŠ¤íŒŒì¼ë§ì€ Babelì´ ìˆ˜í–‰í•˜ê³  ë²ˆë“¤ë§ì€ **Webpack**ì´ ìˆ˜í–‰í•œë‹¤.

ë§Œì•½ ì´ì „ì— ì‹¤í–‰ì‹œí‚¨ ë¹Œë“œ ëª…ë ¹ì´ ì‹¤í–‰ ì¤‘ì¸ ìƒíƒœë¼ë©´ ì¤‘ì§€ì‹œí‚¤ê³  ë‹¤ì‹œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•œë‹¤.

```bash
$ npm run build

> esnext-project@1.0.0 build /Users/leeungmo/Desktop/esnext-project

> webpack -w

webpack is watching the files...

Hash: 912e4ad621459698288f
Version: webpack 4.43.0
Time: 1263ms
Bulit at: 2020. 06. 27. ì˜¤í›„ 3:45:33
   				Asset     Size       Chunks              Chunk Names
	  	bundle.js 8.55 KiB       main [emitted]      main
  bundle.js.map 5.09 KiB       main [emitted][dev] main
Entrypoint main = bundle.js bundle.js.map
[./src/js/lib.js] 3.69 KiB {main} [built]
[./src/js/main.js] 165 bytes {main} [built]
```

**Webpack**ì„ ì‹¤í–‰í•œ ê²°ê³¼, `dist/js` í´ë”ì— `main.js`, `lib.js` ëª¨ë“ˆì´ í•˜ë‚˜ë¡œ ë²ˆë“¤ë§ëœ ê²°ê³¼ë¬¼ì¸ `bundle.js`ê°€ ìƒì„±ëœë‹¤!

`index.html`ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ê³  ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰í•´ë³´ë©´ â€¦

```html
<!DOCTYPE html>
<html>
  <body>
    <script src="./dist/js/bundle.js"></script>
  </body>
</html>
```

![image.png](/images/ch49/49_img_3.png)

`main.js`, `lib.js` ëª¨ë“ˆì´ í•˜ë‚˜ë¡œ ë²ˆë“¤ë§ëœ `bundle.js`ê°€ ë¸Œë¼ìš°ì €ì—ì„œ ë¬¸ì œì—†ì´ ì‹¤í–‰ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤ ~

## 49.2.4 babel-polyfill ì„¤ì¹˜

Babelì„ ì‚¬ìš©í•˜ì—¬ ES6+ / ES.NEXT ì‚¬ì–‘ì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ES5 ì‚¬ì–‘ì˜ ì†ŒìŠ¤ ì½”ë“œë¡œ íŠ¸ëœìŠ¤íŒŒì¼ë§í•´ë„ ë¸Œë¼ìš°ì €ê°€ ì§€ì›í•˜ì§€ ì•ŠëŠ” ì½”ë“œê°€ ë‚¨ì•„ ìˆì„ ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ES6ì—ì„œ ì¶”ê°€ëœ `Promise`, `Object.assign`, `Array.from` ë“±ì€ ES5 ì‚¬ì–‘ìœ¼ë¡œ íŠ¸ëœìŠ¤íŒŒì¼ë§í•´ë„ ES5 ì‚¬ì–‘ì— ëŒ€ì²´í•  ê¸°ëŠ¥ì´ ì—†ê¸° ë•Œë¬¸ì— íŠ¸ëœìŠ¤íŒŒì¼ë§ë˜ì§€ ëª»í•˜ê³  ê·¸ëŒ€ë¡œ ë‚¨ëŠ”ë‹¤.

`src/js/main.js`ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•˜ì—¬ ES6ì—ì„œ ì¶”ê°€ëœ `Promise`, `Object.assign`, `Array.from` ë“±ì´ ì–´ë–»ê²Œ íŠ¸ëœìŠ¤íŒŒì¼ë§ë˜ëŠ”ì§€ í™•ì¸í•´ ë³´ì.

```jsx
// src/js/main.js
import {.pi, power, Foo } from './lib';

console.log(pi);
console.log(power(pi, pi));

const f = new Foo();
console.log(f.foo());
console.log(f.bar());

// polyfillì´ í•„ìš”í•œ ì½”ë“œ #1
console.log(new Promise((resolve, reject) => {
	setTimeout(() => resolve(1), 100);
}));

// polyfillì´ í•„ìš”í•œ ì½”ë“œ #2
console.log(Object.assign({}, { x: 1 }, { y: 2}));

// polyfillì´ í•„ìš”í•œ ì½”ë“œ #3
console.log(Array.from([1, 2, 3], v => v + v));
```

ë‹¤ì‹œ íŠ¸ëœìŠ¤íŒŒì¼ë§ê³¼ ë²ˆë“¤ë§ì„ ì‹¤í–‰í•œ ë‹¤ìŒ, `dist/js/bundle.js`ë¥¼ í™•ì¸í•´ë³´ì.

```jsx
console.log(new Promise(function (resolve, reject) {
	setTimeout(function () {
		return resolve(1);
	},100);
})); // polyfillì´ í•„ìš”í•œ ì½”ë“œ #4
console.log(Object.assign({}, {
	x: 1
}, {
	y: 2
})); // polyfillì´ í•„ìš”í•œ ì½”ë“œ #5

console.log(Array. from [1, 2, 3], function (v) {
	return v + v;
}));
...
```

ì´ì²˜ëŸ¼ `Promise`, `Object.assign`, `Array.from` ë“±ê³¼ ê°™ì´ ES5 ì‚¬ì–‘ìœ¼ë¡œ ëŒ€ì²´í•  ìˆ˜ ì—†ëŠ” ê¸°ëŠ¥ì€ íŠ¸ëœìŠ¤íŒŒì¼ë§ë˜ì§€ ì•ŠëŠ”ë‹¤. ë”°ë¼ì„œ IEì™€ ê°™ì€ êµ¬í˜• ë¸Œë¼ìš°ì €ì—ì„œë„ `Promise`, `Object.assign`, `Array.from`ë“±ê³¼ ê°™ì€ ê°ì²´ë‚˜ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” `@babel/polyfill`ì„ ì„¤ì¹˜í•´ì•¼ í•œë‹¤.

```bash
$ npm install @babel/polyfill
```

ì„¤ì¹˜ê°€ ì™„ë£Œëœ ì´í›„ `package.json` íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

```json
{
	"name": "esnext-project",
	"version": "1.0.0",
	"scripts": {
		"build": "webpack -w"
	}
	"devDependencies": {
		"@babel/cli": "^7.10.3",
		"@babel/core": "^7.10.3",
		"@babel/plugin-proposal-class-properties": "^7.10.1",
		"@babel/present-env": "^7.10.3",
		"@babel-loader": "^8.1.0", // ì´ ë¶€ë¶„ì´ ì¶”ê°€ë¨
		"webpack": "^4.43.0",
		"webpack-cli": "^3.3.12"
	},
	// ì•„ë˜ "dependencies"ë„ ì¶”ê°€ë¨
	"dependencies": {
		"@babel/polyfill": "^7.10.1"
	}
}
```

[`devDependencies`ì™€ `dependencies`?]

- `devDependencies` : ë¡œì»¬ì—ì„œ **ì½”ë“œë¥¼ ì§¤ ë•Œë‚˜ ë¹Œë“œí•  ë•Œ**ë§Œ í•„ìš”í•œ ë„êµ¬ë“¤! ì‹¤ì œ ì‚¬ìš©ìê°€ ì ‘ì†í•´ì„œ ì“°ëŠ” ìµœì¢… ê²°ê³¼ë¬¼(Bundle)ì—ëŠ” í¬í•¨ë  í•„ìš”ê°€ ì—†ë‹¤ ~
- `dependencies` : ì• í”Œë¦¬ì¼€ì´ì…˜ì´ **ì‹¤í–‰ë  ë•Œ(Runtime)** ë°˜ë“œì‹œ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬! ë¸Œë¼ìš°ì €ì—ì„œ ì½”ë“œê°€ ëŒì•„ê°ˆ ë•Œ ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì—†ìœ¼ë©´ ì„œë¹„ìŠ¤ê°€ ë©ˆì¶°ìš” ã… ã… 

**[ì¤‘ìš”]** `@babel/polyfill`ì€ ê°œë°œ í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œë„ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ë”°ë¼ì„œ ê°œë°œìš© ì˜ì¡´ì„±(`devDependencies`)ìœ¼ë¡œ ì„¤ì¹˜í•˜ëŠ” `--save-dev` ì˜µì…˜ì„ ì§€ì •í•˜ì§€ ì•ŠëŠ”ë‹¤.

ES6ì˜ `import`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” ì§„ì…ì ì˜ ì„ ë‘ì—ì„œ ë¨¼ì € í´ë¦¬í•„ì„ ë¡œë“œí•˜ë„ë¡ í•œë‹¤.

```jsx
// src/js/main.js
import '@babel/polyfill'; // ì„ ë‘ì— ë¨¼ì € import
import { pi, power, Foo } from './lib';
```

**Webpack**ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” ìœ„ ë°©ë²• ëŒ€ì‹  `webpack.config.js` íŒŒì¼ì˜ `entry` ë°°ì—´ì— í´ë¦¬í•„ì„ ì¶”ê°€í•œë‹¤.

```jsx
const path = require('path');
module.exports = {
	// entry file
	// https://webpack.js.org/configuration/entry-context/#entry
	entry: ['@babel/polyfill', './src/js/main.js'],
...
```

ìœ„ì™€ ê°™ì´ `webpack.config.js` íŒŒì¼ì„ ìˆ˜ì •í•˜ì—¬ í´ë¦¬í•„ì„ ë°˜ì˜í•´ ë³´ì. ë¹Œë“œ ëª…ë ¹ì´ ì‹¤í–‰ ì¤‘ì¸ ìƒíƒœë¼ë©´ ì¤‘ì§€ì‹œí‚¤ê³  ë‹¤ì‹œ ë‹¤ìŒê³¼ ê°™ì´ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ **Webpack**ì„ ì‹¤í–‰í•œë‹¤.

```bash
$ npm run build
> esnext-project@1.0.0 build /Users/leeungmo/Desktop/esnext-project
> webpack -w

webpack is watching the files...

Hash: 5f1a654d0873b7633f49
Version: webpack 4.43.0
Time: 2111ms
Built at: 2020.06.27. ì˜¤í›„ 3:50:37
			 Asset     Size  Chunks                Chunk Names
	 bundle.js  408 KiB  main (emitted]        main
bundle.js.map 324 KiB  main [emitted][dev]   main
Entrypoint main = bundle.js bundle.js.map
[0] multi @babel/polyfill ./src/js/main.js 40bytes {main} [built]
[./src/js/lib. js] 3.69 KiB {main} [built]
[./src/js/main.js] 165 bytes {main} [built]
		+ 307 hidden modules
```

`dist/js/bundle.js`ë¥¼ í™•ì¸í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ í´ë¦¬í•„ì´ ì¶”ê°€ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![image.png](/images/ch49/49_img_4.png)

## ì´í‰ â€¦

### 1. ê·¸ë˜ì„œ Babelê³¼ Webpackì˜ ì°¨ì´ê°€ ë¬´ì—‡ì¸ê°€?

| êµ¬ë¶„      | **Babel (ì»´íŒŒì¼ëŸ¬/íŠ¸ëœìŠ¤íŒŒì¼ëŸ¬)**         | **Webpack (ëª¨ë“ˆ ë²ˆë“¤ëŸ¬)**                        |
| --------- | ----------------------------------------- | ------------------------------------------------ |
| í•µì‹¬ ì—­í•  | ì½”ë“œì˜ ë³€í™˜ (ìµœì‹  ë¬¸ë²• â†’ êµ¬í˜• ë¬¸ë²•)       | íŒŒì¼ì˜ í†µí•© (ì—¬ëŸ¬ íŒŒì¼ì„ í•˜ë‚˜ë¡œ ë¬¶ìŒ)            |
| ë¹„ìœ       | ì™¸êµ­ì–´(ES6+)ë¥¼ í•œêµ­ì–´(ES5)ë¡œ ë²ˆì—­í•¨       | í©ì–´ì§„ ì‹ì¬ë£Œ(JS, CSS, PNG)ë¥¼ ë°€í‚¤íŠ¸ë¡œ í¬ì¥í•¨    |
| ì£¼ìš” ì‘ì—… | í™”ì‚´í‘œ í•¨ìˆ˜, í´ë˜ìŠ¤ ë“±ì„ ì¼ë°˜ í•¨ìˆ˜ë¡œ ë³€ê²½ | `import`/`export` ë¡œ ì—°ê²°ëœ íŒŒì¼ë“¤ì„ í•˜ë‚˜ë¡œ í•©ì¹¨ |
| ê²°ê³¼ë¬¼    | ë¬¸ë²•ì´ ë°”ë€ JS ì½”ë“œ                       | í•˜ë‚˜ë¡œ í•©ì³ì§„ `bundle.js` íŒŒì¼                   |

### 2. ë‘˜ì´ ì–´ë–»ê²Œ ìƒí˜¸ì‘ìš©ì„ í•˜ëŠ”ê°€?

â†’ ë³´í†µ Webpack ì„¤ì • íŒŒì¼(`webpack.config.js`) ì•ˆì— `babel-loader`ë¥¼ ë“±ë¡í•´ì„œ ì‚¬ìš©!

1. **Webpack**ì´ í”„ë¡œì íŠ¸ì˜ ì…êµ¬(Entry) íŒŒì¼ì„ ì½ëŠ”ë°...
2. íŒŒì¼ë“¤ì„ í•˜ë‚˜ì”© í•©ì¹˜ë ¤ê³  ë³´ë‹ˆ, ìµœì‹  ë¬¸ë²•ìœ¼ë¡œ ì“°ì—¬ ìˆë‹¤ë©´?
3. **Webpack**ì´ Babel(ì •í™•íˆëŠ” `babel-loader`)ì—ê²Œ ë²ˆì—­ì„ ë§¡ê¸°ê³ ,
4. Babelì´ ë²ˆì—­í•´ì„œ ëŒë ¤ì£¼ë©´, **Webpack**ì€ ë²ˆì—­ëœ ì½”ë“œë“¤ì„ ì˜ˆì˜ê²Œ í¬ì¥í•´ì„œ ìµœì¢… `bundle.js`ë¥¼ ë§Œë“ ë‹¤!
