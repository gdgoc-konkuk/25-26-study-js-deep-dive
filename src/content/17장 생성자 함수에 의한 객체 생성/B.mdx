# 17ì¥. ìƒì„±ì í•¨ìˆ˜ì— ì˜í•œ ê°ì²´ ìƒì„±

<br />

# 17.1 Object ìƒì„±ì í•¨ìˆ˜

- `new` ì—°ì‚°ìì™€ í•¨ê»˜ Object ìƒì„±ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ë¹ˆ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜í•œë‹¤.
- ë¹ˆ ê°ì²´ë¥¼ ìƒì„±í•œ ì´í›„ í”„ë¡œí¼í‹° ë˜ëŠ” ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ì—¬ ê°ì²´ë¥¼ ì™„ì„±í•  ìˆ˜ ìˆë‹¤.

```jsx
// ë¹ˆ ê°ì²´ì˜ ìƒì„±
const person = new Object();

// í”„ë¡œí¼í‹° ì¶”ê°€
person.name = 'Lee';
person.sayHello = function () {
  console.log('Hi! My name is ' + this.name);
};

console.log(person); // {name: "Lee", sayHello: f}
person.sayHello(); // Hi! My nmae is Lee
```

<br />
<br />

# 17.2 ìƒì„±ì í•¨ìˆ˜

<br />
## 17.2.1 ê°ì²´ ë¦¬í„°ëŸ´ì— ì˜í•œ ê°ì²´ ìƒì„± ë°©ì‹ì˜ ë¬¸ì œì 

- ë™ì¼í•œ í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ” ê°ì²´ë¥¼ ì—¬ëŸ¬ ê°œ ìƒì„±í•´ì•¼ í•˜ëŠ” ê²½ìš° ë§¤ë²ˆ ê°™ì€ í”„ë¡œí¼í‹°ë¥¼ ê¸°ìˆ í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë¹„íš¨ìœ¨ì ì´ë‹¤.

  ```jsx
  const circle1 = {
    radius: 5,
    getDiameter() {
      return 2 * this.radius;
    },
  };

  console.log(circle1.getDiameter()); // 10

  const circle2 = {
    radius: 10,
    getDiameter() {
      return 2 * this.radius;
    },
  };

  console.log(circle1.getDiameter()); // 20
  ```

- ê°ì²´ëŠ” í”„ë¡œí¼í‹°ë¥¼ í†µí•´ ê°ì²´ ê³ ìœ ì˜ ìƒíƒœë¥¼ í‘œí˜„í•œë‹¤.
- ë©”ì„œë“œë¥¼ í†µí•´ ìƒíƒœ ë°ì´í„°ì¸ í”„ë¡œí¼í‹°ë¥¼ ì°¸ì¡°í•˜ê³  ì¡°ì‘í•˜ëŠ” ë™ì‘ì„ í‘œí˜„í•œë‹¤.

<br />
## 17.2.2 ìƒì„±ì í•¨ìˆ˜ì— ì˜í•œ ê°ì²´ ìƒì„± ë°©ì‹ì˜ ì¥ì 

- í”„ë¡œí¼í‹° êµ¬ì¡°ê°€ ë™ì¼í•œ ê°ì²´ ì—¬ëŸ¬ ê°œë¥¼ ê°„í¸í•˜ê²Œ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
- ê°ì²´(ì¸ìŠ¤í„´ìŠ¤)ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ í…œí”Œë¦¿(í´ë˜ìŠ¤)ì²˜ëŸ¼ ìƒì„±ì í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

  ```jsx
  // ìƒì„±ì í•¨ìˆ˜
  function Circle(radius) {
  	// ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ìƒì„±ì í•¨ìˆ˜ê°€ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
  		this.radius = function () {
  			return 2 * this.radius;
  		};
  }

  // ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒì„±
  const circle1 = new Circle(5); // ë°˜ì§€ë¦„ì´ 5ì¸ Circle ê°ì²´ë¥¼ ìƒì„±
  const circle2 = new Circle(100; // ë°˜ì§€ë¦„ì´ 10ì¸ Circle ê°ì²´ë¥¼ ìƒì„±

  console.log(circle1.getDiameter()); // 10
  console.log(circle2.getDiameter()); // 20
  ```

### this

- ê°ì²´ ìì‹ ì˜ í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œë¥¼ ì°¸ì¡°í•˜ê¸° ìœ„í•œ **ìê¸° ì°¸ì¡° ë³€ìˆ˜**(self-referencing variable)ë‹¤.
- thisê°€ ê°€ë¦¬í‚¤ëŠ” ê°’, ì¦‰ **this ë°”ì¸ë”©ì€ í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ê²°ì •ëœë‹¤.**

| **í•¨ìˆ˜ í˜¸ì¶œ ë°©ì‹**   | **thisê°€ ê°€ë¦¬í‚¤ëŠ” ê°’ (this ë°”ì¸ë”©)**    |
| -------------------- | --------------------------------------- |
| ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ   | ì „ì—­ ê°ì²´                               |
| ë©”ì„œë“œë¡œì„œ í˜¸ì¶œ      | ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ê°ì²´ (ë§ˆì¹¨í‘œ ì•ì˜ ê°ì²´) |
| ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ | ìƒì„±ì í•¨ìˆ˜ê°€(ë¯¸ë˜ì—) ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤   |

```jsx
// í•¨ìˆ˜ëŠ” ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ í˜¸ì¶œë  ìˆ˜ ìˆë‹¤.
function foo() {
  console.log(this);
}

// ì¼ë°˜ì ì¸ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ
// ì „ì—­ ê°ì²´ëŠ” ë¸Œë¼ìš°ì € í™˜ê²½ì—ì„œëŠ” window, Node.js í™˜ê²½ì—ì„œëŠ” globalì„ ê°€ë¦¬í‚¨ë‹¤.
foo(); // window

const obj = new foo(); // ES6 í”„ë¡œí¼í‹° ì¶•ì•½ í‘œí˜„

// ë©”ì„œë“œë¡œì„œ í˜¸ì¶œ
obj.foo(); // obj

const inst = new foo(); // inst
```

- **`new` ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œí•˜ë©´ í•´ë‹¹ í•¨ìˆ˜ëŠ” ìƒì„±ì í•¨ìˆ˜ë¡œ ë™ì‘í•œë‹¤.**
- ë§Œì•½ `new` ì—°ì‚°ìì™€ í•¨ê»˜ ìƒì„±ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ ìƒì„±ì í•¨ìˆ˜ê°€ ì•„ë‹ˆë¼ ì¼ë°˜ í•¨ìˆ˜ë¡œ ë™ì‘í•œë‹¤.

```jsx
// new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ ìƒì„±ì í•¨ìˆ˜ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.
// ì¦‰, ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œëœë‹¤.
const circle3 = Circle(15);

// ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œëœ Circleì€ ë°˜í™˜ë¬¸ì´ ì—†ìœ¼ë¯€ë¡œ ì•”ë¬µì ìœ¼ë¡œ undefinedë¥¼ ë°˜í™˜í•œë‹¤.
console.log(circle3); // undefined

// ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œëœ Circle ë‚´ì˜ thisëŠ” ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
console.log(radius); // 15
```

## 17.2.3 ìƒì„±ì í•¨ìˆ˜ì˜ ì¸ìŠ¤í„´ìŠ¤ì˜ ìƒì„± ê³¼ì •

- ìƒì„±ì í•¨ìˆ˜ì˜ ì—­í•  : ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„± & ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™”(ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œí¼í‹° ì¶”ê°€ ë° ì´ˆê¸°ê°’ í• ë‹¹)
  - ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™”ëŠ” ì„ íƒì !!

  ```jsx
  function Circle(radius) {
    // ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™”
    this.radius = radius;
    this.getDiameter = function () {
      return 2 * this.radius;
    };
  }

  // ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
  const circle1 = new Circle(5); // ë°˜ì§€ë¦„ 5ì¸ Circle ê°ì²´ë¥¼ ìƒì„±
  ```

### 1. ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ê³¼ this ë°”ì¸ë”©

- ì•”ë¬µì ìœ¼ë¡œ ë¹ˆ ê°ì²´ê°€ ìƒì„±ëœë‹¤.
  ### ë°”ì¸ë”©
  - ì‹ë³„ìì˜ ê°’ì„ ì—°ê²°í•˜ëŠ” ê³¼ì •
  - ë³€ìˆ˜ ì„ ì–¸ = ë³€ìˆ˜ ì´ë¦„(ì‹ë³„ì)ê³¼ í™•ë³´ëœ ë©”ëª¨ë¦¬ ê³µê°„ì˜ ì£¼ì†Œë¥¼ ë°”ì¸ë”©
  - this ë°”ì¸ë”© = `this`ê°€ ê°€ë¦¬í‚¬ ê°ì²´ë¥¼ ë°”ì¸ë”©
  ```jsx
  function Circle() {
    // 1. ì•”ë¬µì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê³  thisì— ë°”ì¸ë”©ëœë‹¤.
    this.radius = radius;
    this.getDiameter = function () {
      return 2 * this.radius;
    };
  }
  ```

### 2. ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™”

- ìƒì„±ì í•¨ìˆ˜ì— ê¸°ìˆ ë˜ì–´ ìˆëŠ” ì½”ë“œê°€ í•œ ì¤„ì”© ì‹¤í–‰ë˜ì–´ thisì— ë°”ì¸ë”©ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™”í•œë‹¤.

  ```jsx
  function Circle() {
    // 1. ì•”ë¬µì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ê³  thisì— ë°”ì¸ë”©ëœë‹¤.

    // 2. thisì— ë°”ì¸ë”©ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™”í•œë‹¤.
    this.radius = radius;
    this.getDiameter = function () {
      return 2 * this.radius;
    };
  }
  ```

### 3. ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜

- ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì˜ ëª¨ë“  ì²˜ë¦¬ê°€ ëë‚˜ë©´ ì™„ì„±ëœ ì¸ìŠ¤í„´ìŠ¤ê°€ ë°”ì¸ë”©ëœ `this`ê°€ ì•”ë¬µì ìœ¼ë¡œ ë°˜í™˜ëœë‹¤.

  ```jsx
  function Circle(radius) {
    // 1. ì•”ë¬µì ìœ¼ë¡œ ë¹ˆ ê°ì²´ê°€ ìƒì„±ë˜ê³  thisì— ë°”ì¸ë”©ëœë‹¤.

    // 2. thisì— ë°”ì¸ë”©ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™”í•œë‹¤.
    this.radius = radius;
    this.getDiameter = function () {
      return 2 * this.radius;
    };

    // 3. ì™„ì„±ëœ ì¸ìŠ¤í„´ìŠ¤ê°€ ë°”ì¸ë”©ëœ thisê°€ ì•”ë¬µì ìœ¼ë¡œ ë°˜í™˜ëœë‹¤.
  }

  // ì¸ìŠ¤í„´ìŠ¤ ìƒì„±. Circle ìƒì„±ì í•¨ìˆ˜ëŠ” ì•”ë¬µì ìœ¼ë¡œ thisë¥¼ ë°˜í™˜í•œë‹¤.
  const circle = new Circle(1);
  console.log(circle); // Circle {radius: 1, getDiameter : f}
  ```

- ë§Œì•½ `this`ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ê°ì²´ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ë°˜í™˜í•˜ë©´ `this`ê°€ ë°˜í™˜ë˜ì§€ ëª»í•˜ê³  `return`ë¬¸ì— ëª…ì‹œí•œ ê°ì²´ê°€ ë°˜í™˜ëœë‹¤.

  ```jsx
  function Circle(radius) {
    // 1. ì•”ë¬µì ìœ¼ë¡œ ë¹ˆ ê°ì²´ê°€ ìƒì„±ë˜ê³  thisì— ë°”ì¸ë”©ëœë‹¤.

    // 2. thisì— ë°”ì¸ë”©ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™”í•œë‹¤.
    this.radius = radius;
    this.getDiameter = function () {
      return 2 * this.radius;
    };

    // 3. ì•”ë¬µì ìœ¼ë¡œ thisë¥¼ ë°˜í™˜í•œë‹¤.
    // ëª…ì‹œì ìœ¼ë¡œ ê°ì²´ë¥¼ ë°˜í™˜í•˜ë©´ ì•”ë¬µì ì¸ this ë°˜í™˜ì´ ë¬´ì‹œëœë‹¤.
    return {};
  }

  // ì¸ìŠ¤í„´ìŠ¤ ìƒì„±. Circle ìƒì„±ì í•¨ìˆ˜ëŠ” ëª…ì‹œì ìœ¼ë¡œ ë°˜í™˜í•œ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
  const circle = new Circle(1);
  console.log(circle); // {}
  ```

- í•˜ì§€ë§Œ ëª…ì‹œì ìœ¼ë¡œ ì›ì‹œ ê°’ì„ ë°˜í™˜í•˜ë©´ ì›ì‹œ ê°’ ë°˜í™˜ì€ ë¬´ì‹œë˜ê³  ì•”ë¬µì ìœ¼ë¡œ `this`ê°€ ë°˜í™˜ëœë‹¤.

```jsx
function Circle(radius) {
  // 1. ì•”ë¬µì ìœ¼ë¡œ ë¹ˆ ê°ì²´ê°€ ìƒì„±ë˜ê³  thisì— ë°”ì¸ë”©ëœë‹¤.

  // 2. thisì— ë°”ì¸ë”©ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™”í•œë‹¤.
  this.radius = radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };

  // 3. ì•”ë¬µì ìœ¼ë¡œ thisë¥¼ ë°˜í™˜í•œë‹¤.
  // ëª…ì‹œì ìœ¼ë¡œ ì›ì‹œ ê°’ì„ ë°˜í™˜í•˜ë©´ ì›ì‹œ ê°’ ë°˜í™˜ì€ ë¬´ì‹œë˜ê³  ì•”ë¬µì ìœ¼ë¡œ thisê°€ ë°˜í™˜ëœë‹¤.
  return 100;
}

// ì¸ìŠ¤í„´ìŠ¤ ìƒì„±. Circle ìƒì„±ì í•¨ìˆ˜ëŠ” ëª…ì‹œì ìœ¼ë¡œ ë°˜í™˜í•œ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
const circle = new Circle(1);
console.log(circle); // Circle {radius: 1, getDiameter: f}
```

- ë”°ë¼ì„œ ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì— `return`ë¬¸ì„ ë°˜ë“œì‹œ ìƒëµí•´ì•¼ í•œë‹¤.

## 17.2.4 ë‚´ë¶€ ë©”ì„œë“œ `[[Call]]`ê³¼ `[[Construct]]`

### ì¼ë°˜ ê°ì²´ëŠ” í˜¸ì¶œí•  ìˆ˜ ì—†ì§€ë§Œ í•¨ìˆ˜ëŠ” í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.

- ì¼ë°˜ ê°ì²´ê°€ ê°€ì§€ê³  ìˆëŠ” ë‚´ë¶€ ìŠ¬ë¡¯ & ë©”ì„œë“œ + í•¨ìˆ˜ ê°ì²´ë§Œì„ ìœ„í•œ ë‚´ë¶€ ìŠ¬ë¡¯ & ë©”ì„œë“œ ì†Œìœ 
  - `[[Call]]`, `[[Construct]]`ëŠ” ë©”ì„œë“œ
  - ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œë˜ë©´ `[[Call]]`, ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œë˜ë©´ `[[Construct]]`ê°€ í˜¸ì¶œëœë‹¤.

```java
// í•¨ìˆ˜ëŠ” ê°ì²´ë‹¤.
function foo() {}

// í•¨ìˆ˜ëŠ” ê°ì²´ì´ë¯€ë¡œ í”„ë¡œí¼í‹°ë¥¼ ì†Œìœ í•  ìˆ˜ ìˆë‹¤.
foo.prop = 10;

// í•¨ìˆ˜ëŠ” ê°ì²´ì´ë¯€ë¡œ ë©”ì„œë“œë¥¼ ì†Œìœ í•  ìˆ˜ ìˆë‹¤.
foo.method = function () {
	console.log(this.prop);
};

foo.method(); // 10

// ì¼ë°˜ì ì¸ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ: [[Call]]ì´ í˜¸ì¶œëœë‹¤.
foo();

// ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ: [[Construct]]ê°€ í˜¸ì¶œëœë‹¤.
new foo();
```

- `[[Call]]`ì„ ê°–ëŠ” í•¨ìˆ˜ ê°ì²´ = **callable**
- `[[Construct]]` ì„ ê°–ëŠ” í•¨ìˆ˜ ê°ì²´ = constructor / ì•ˆê°€ì§€ë©´ = non-constructor

â‡’ ëª¨ë“  í•¨ìˆ˜ ê°ì²´ëŠ” í˜¸ì¶œí•  ìˆ˜ ìˆì§€ë§Œ, ëª¨ë“  í•¨ìˆ˜ ê°ì²´ëŠ” ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.

![í•¨ìˆ˜ì™€ ì¼ê¸‰ ê°ì²´](/images/ch17/ch17_b1.png)

## 17.2.5 constructorì™€ non-constructorì˜ êµ¬ë¶„

- ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ í•¨ìˆ˜ ì •ì˜ë¥¼ í‰ê°€í•˜ì—¬ í•¨ìˆ˜ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ì •ì˜ ë°©ì‹ì— ë”°ë¼ í•¨ìˆ˜ë¥¼ êµ¬ë¶„í•œë‹¤.
  - constructor : í•¨ìˆ˜ ì„ ì–¸ë¬¸, í•¨ìˆ˜ í‘œí˜„ì‹, í´ë˜ìŠ¤
  - non-constructor : ë©”ì„œë“œ(ES6 ë©”ì„œë“œ ì¶•ì•½ í‘œí˜„), í™”ì‚´í‘œ í•¨ìˆ˜

### ì£¼ì˜í•  ì  #1

- ECMAScript ì‚¬ì–‘ì—ì„œ ë©”ì„œë“œë¡œ ì¸ì •í•˜ëŠ” ë²”ìœ„ê°€ ì¼ë°˜ì ì¸ ì˜ë¯¸ì˜ ë©”ì„œë“œë³´ë‹¤ ì¢ë‹¤.
  - í•¨ìˆ˜ë¥¼ í”„ë¡œí¼í‹° ê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ì¼ë°˜ì ìœ¼ë¡œ ë©”ì„œë“œë¡œ í†µì¹­í•˜ëŠ”ë°, ECMAScript ì‚¬ì–‘ì—ì„œëŠ” ES6ì˜ ë©”ì„œë“œ ì¶•ì•½ í‘œí˜„ë§Œì„ ì˜ë¯¸í•œë‹¤.

```jsx
// ì¼ë°˜ í•¨ìˆ˜ ì •ì˜: í•¨ìˆ˜ ì„ ì–¸ë¬¸, í•¨ìˆ˜ í‘œí˜„ì‹
function foo() {}
const bar = function () {};
// í”„ë¡œí¼í‹° xì˜ ê°’ìœ¼ë¡œ í• ë‹¹ëœ ê²ƒì€ ì¼ë°˜ í•¨ìˆ˜ë¡œ ì •ì˜ëœ í•¨ìˆ˜ì´ë‹¤.
// ì´ëŠ” ë©”ì„œë“œë¡œ ì¸ì •í•˜ì§€ ì•ŠëŠ”ë‹¤.
const baz = {
  x: function () {},
};

// ì¼ë°˜ í•¨ìˆ˜ë¡œ ì •ì˜ëœ í•¨ìˆ˜ë§Œì´ constructorë‹¤.
new foo(); // foo {}
new bar(); // bar {}
new baz.x(); // x {}

// í™”ì‚´í‘œ í•¨ìˆ˜ ì •ì˜
const arrow = () => {};

new arrow(); // TypeError: arrow is not a constructor

// ë©”ì„œë“œ ì •ì˜: ES6ì˜ ë©”ì„œë“œ ì¶•ì•½ í‘œí˜„ë§Œ ë©”ì„œë“œë¡œ ì¸ì •í•œë‹¤.
const obj = {
  x() {},
};

new obj.x(); // TypeError: obj.x is not a constructor
```

### ì£¼ì˜í•  ì  #2

- ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œë  ê²ƒì„ ê¸°ëŒ€í•˜ê³  ì •ì˜í•˜ì§€ ì•Šì€ ì¼ë°˜ í•¨ìˆ˜ (callableì´ë©´ì„œ constructor)
- new ì—°ì‚°ì ë¶™ì—¬ í˜¸ì¶œí•˜ë©´ ìƒì„±ì ì²˜ëŸ¼ ë™ì‘í•  ìˆ˜ë„ ìˆë‹¤.

```jsx
function foo() {}

// ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ
// [[Call]]ì´ í˜¸ì¶œëœë‹¤. ëª¨ë“  í•¨ìˆ˜ëŠ” [[Call]]ì´ êµ¬í˜„ë˜ì–´ ìˆë‹¤.
foo();

// ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ
// [[Constructor]]ê°€ í˜¸ì¶œëœë‹¤. ì´ë•Œ [[Constructor]]ë¥¼ ê°–ì§€ ì•ŠëŠ”ë‹¤ë©´ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.
new foo();
```

<br />
<br />
## 17.2.6 `new` ì—°ì‚°ì

`new` ì—°ì‚°ìë¡œ ìƒì„±ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ìƒì„±ì í•¨ìˆ˜ë¡œ ë™ì‘í•œë‹¤.

- `[[Construct]]`ê°€ í˜¸ì¶œëœë‹¤ = constructorë‹¤.

```jsx
// ìƒì„±ì í•¨ìˆ˜ë¡œì„œ ì •ì˜í•˜ì§€ ì•Šì€ ì¼ë°˜ í•¨ìˆ˜
function add(x, y) {
	return x + y;
}

// ìƒì„±ì í•¨ìˆ˜ë¡œì„œ ì •ì˜í•˜ì§€ ì•Šì€ ì¼ë°˜ í•¨ìˆ˜ë¥¼ new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œ
let inst = new add();

// í•¨ìˆ˜ê°€ ê°ì²´ë¥¼ ë°˜í™˜í•˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ë°˜í™˜ë¬¸ì•„ ë¬´ì‹œëœë‹¤. ê°ì²´ê°€ ìƒì„±ë˜ì–´ ë°˜í™˜í•œë‹¤.
console.log(inst); // {}

// ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” ì¼ë°˜ í•¨ìˆ˜
function createUser(name, role) {
	return {name, role};
}

// ì¼ë°˜ í•¨ìˆ˜ë¥¼ new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œ
inst new createUser('Lee', 'admin');
// í•¨ìˆ˜ê°€ ìƒì„±í•œ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
console.log(inst); // {name: "Lee", role: "admin"}
```

ë°˜ëŒ€ë¡œ, ì—°ì‚°ì ì—†ì´ ìƒì„±ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œëœë‹¤.

- `[[Call]]`ì´ í˜¸ì¶œëœë‹¤.

```jsx
// ìƒì„±ì í•¨ìˆ˜
function Circle() {
  this.radius;
  this.getDiameter = function () {
    return 2 * this.radius;
  };
}

// new ì—°ì‚°ì ì—†ì´ ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œí•˜ë©´ ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œëœë‹¤.
const circle = Circle(5);
console.log(circle); //undefined

// ì¼ë°˜ í•¨ìˆ˜ ë‚´ë¶€ì˜ thisëŠ” ì „ì—­ ê°ì²´ì— windowë¥¼ ê°€ë¦¬í‚¨ë‹¤.
console.log(); // 5
console.log(getDiameter()); // 10

circle.getDiameter();
// TypeError: Cannot read property 'getDiameter' of undefined
```

- `Circle()`
  - ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ : `this` â‡’ `Circle` ìƒì„±ì í•¨ìˆ˜ê°€ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ ê°€ë¦¬í‚´
  - ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œ : `this` â‡’ ì „ì—­ ê°ì²´ `window` ê°€ë¦¬í‚´
    â†’ ìœ„ ì˜ˆì œì—ì„œëŠ” `radius` í”„ë¡œí¼í‹°ì™€ `getDiameter` ë©”ì„œë“œëŠ” ì „ì—­ ê°ì²´ì˜ ê²ƒ (ì¼ë°˜ í•¨ìˆ˜ í˜¸ì¶œ)

â†’ ì¼ë°˜ í•¨ìˆ˜ì™€ ìƒì„±ì í•¨ìˆ˜ì— íŠ¹ë³„í•œ í˜•ì‹ì  ì°¨ì´ê°€ ì—†ìœ¼ë¯€ë¡œ ìƒì„±ì í•¨ìˆ˜ëŠ” íŒŒìŠ¤ì¹¼ ì¼€ì´ìŠ¤ë¡œ ëª…ëª…í•˜ëŠ” ê²ƒì„ ê¶Œì¥!

<br />
<br />
## 17.2.7 `new.target`

### new ì—°ì‚°ìì™€ í•¨ê»˜ ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œë˜ë©´ í•¨ìˆ˜ ë‚´ë¶€ì˜ `new.target`ì€ í•¨ìˆ˜ ìì‹ ì„ ê°€ë¦¬í‚¨ë‹¤.

### new ì—°ì‚°ì ì—†ì´ ì¼ë°˜ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œëœ í•¨ìˆ˜ ë‚´ë¶€ì˜ `new.target`ì€ undefinedë‹¤.

```jsx
// ìƒì„±ì í•¨ìˆ˜
function Circle(radius) {
	// ì´ í•¨ìˆ˜ê°€ new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œë˜ì§€ ì•Šì•˜ë‹¤ë©´ new.targetì€ undefinedë‹¤.
	if(!new.target) {
		// new ì—°ì‚°ìì™€ í•¨ê»˜ ìƒì„±ì í•¨ìˆ˜ë¥¼ ì¬ê·€ í˜¸ì¶œí•˜ì—¬ ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•œë‹¤.
			retun new Circle(radius);
	}
	this.radius = radius;
	this.getDiameter = function () {
		return 2 * radius;
	};
}

// new ì—°ì‚°ì ì—†ì´ ìƒì„±ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ë„ new.targetì„ í†µí•´ ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œëœë‹¤.
const circle = Circle(5);
console.log(circle.getDiameter());
```

ëŒ€ë¶€ë¶„ì˜ ë¹ŒíŠ¸ì¸ ìƒì„±ì í•¨ìˆ˜(`Object`, `String`, `Boolean`, `Function`, `Array`, `Date`, `RegExp`, `Promise` ë“±)ì€ `new` ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•œ í›„ ì ì ˆí•œ ê°’ì„ ë°˜í™˜í•œë‹¤.

- `Object`, `Function` : `new` ì—°ì‚°ìì™€ ë¬´ê´€í•˜ê²Œ ë™ì¼í•˜ê²Œ ë™ì‘

  ```jsx
  let obj = new Object();
  console.log(obj); // {}

  obj = Object();
  console.log(obj); // {}

  let f = new Function('x', 'return x ** x');
  console.log(f); // f anonymous(x) { return x ** x }

  f = Function('x', 'return x ** x');
  console.log(f); // f anonymous(x) { return x ** x }
  ```

- `String`, `Number`, `Boolean` : `new` ì—°ì‚°ì ì‚¬ìš©ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜, ì—†ì´ í˜¸ì¶œí•˜ë©´ ì›ì‹œ íƒ€ì…ìœ¼ë¡œ ë°˜í™˜ â†’ ë°ì´í„° íƒ€ì…ì„ ë³€í™œí•  ìˆ˜ ìˆë‹¤!

  ```jsx
  const str = String(123);
  console.log(str, typeof str); // 123 string

  const num = Number('123');
  console.log(num, typeof num); // 123 number

  const bool = Boolean('true');
  console.log(bool, typeof bool); // true boolean
  ```

  ***

# í€´ì¦ˆë¥¼ í’€ì–´ë´…ì‹œë‹¤! ğŸ§

---

## Q1. this ë°”ì¸ë”©

### ë‹¤ìŒ ì½”ë“œì˜ ì‹¤í–‰ ê²°ê³¼ëŠ”?

```jsx
function Circle(radius) {
  this.radius = radius;
  this.getArea = function () {
    return Math.PI * this.radius ** 2;
  };
}

const circle1 = Circle(5);
console.log(circle1);
console.log(radius);
```

â‘  `Circle { radius: 5, getArea: [Function] }`, ReferenceError

â‘¡ `undefined`, 5

â‘¢ `Circle { radius: 5, getArea: [Function] }`, `undefined`

â‘£ `undefined`, ReferenceError

<details>
  - <summary>ì •ë‹µ ë³´ê¸°</summary>
  <br />
  **ì •ë‹µ: â‘¡**
  <br />
  `new` ì—°ì‚°ì ì—†ì´ í˜¸ì¶œí•˜ë©´ ì¼ë°˜ í•¨ìˆ˜ë¡œ ë™ì‘í•˜ê³ , `this`ëŠ” ì „ì—­ ê°ì²´ë¥¼
  ê°€ë¦¬í‚¨ë‹¤.
  <br /> `Circle()`ì€ ë°˜í™˜ë¬¸ì´ ì—†ì–´ `undefined`ë¥¼ ë°˜í™˜í•˜ê³ , `radius`ëŠ” ì „ì—­
  ë³€ìˆ˜ë¡œ 5ê°€ í• ë‹¹ëœë‹¤.
</details>
---

## Q2. constructorì™€ non-constructor

### ë‹¤ìŒ ì¤‘ constructorê°€ ì•„ë‹Œ ê²ƒì€?

â‘  `function foo() {}`

â‘¡ `const bar = function() {}`

â‘¢ `const baz = () => {}`

â‘£ `const obj = { x: function() {} }`ì˜ x

<details>
  - <summary>ì •ë‹µ ë³´ê¸°</summary>
  <br />
  ** ì •ë‹µ: â‘¢ **
  <br />
  í™”ì‚´í‘œ í•¨ìˆ˜ëŠ” non-constructorì´ë‹¤. `new` ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.
</details>
---

## Q3. ìƒì„±ì í•¨ìˆ˜ì˜ ë°˜í™˜

### ë‹¤ìŒ ì½”ë“œì˜ ì‹¤í–‰ ê²°ê³¼ëŠ”?

```jsx
function Person(name) {
  this.name = name;
  return 100;
}

const person = new Person('Lee');
console.log(person);
```

â‘  100

â‘¡ undefined

â‘¢ `Person { name: 'Lee' }`

â‘£ `{}`

<details>
  - <summary>ì •ë‹µ ë³´ê¸°</summary>
  <br />
  **ì •ë‹µ: â‘¢**
  <br />
  ìƒì„±ì í•¨ìˆ˜ì—ì„œ ì›ì‹œ ê°’ì„ ëª…ì‹œì ìœ¼ë¡œ ë°˜í™˜í•˜ë©´ ì›ì‹œ ê°’ ë°˜í™˜ì€ ë¬´ì‹œë˜ê³  `this`ê°€
  ë°˜í™˜ëœë‹¤.
</details>
---

## Q4. ë‚´ë¶€ ë©”ì„œë“œ

### ë‹¤ìŒ ì„¤ëª…ì´ ë§ìœ¼ë©´ O, í‹€ë¦¬ë©´ Xë¥¼ ì„ íƒí•˜ì„¸ìš”.

```
"ëª¨ë“  í•¨ìˆ˜ ê°ì²´ëŠ” [[Construct]] ë‚´ë¶€ ë©”ì„œë“œë¥¼ ê°€ì§€ë¯€ë¡œ ìƒì„±ì í•¨ìˆ˜ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤."
```

O / X

<details>
  - <summary>ì •ë‹µ ë³´ê¸°</summary>
  <br />
  **ì •ë‹µ: X**
  <br />
  ëª¨ë“  í•¨ìˆ˜ ê°ì²´ëŠ” `[[Call]]`ì„ ê°€ì§€ì§€ë§Œ(callable), ëª¨ë“  í•¨ìˆ˜ê°€
  `[[Construct]]`ë¥¼ ê°€ì§€ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤(non-constructor ì¡´ì¬).
</details>
---

## Q5. new.target

### ë‹¤ìŒ ì½”ë“œì˜ ì‹¤í–‰ ê²°ê³¼ëŠ”?

```jsx
function User(name) {
  if (!new.target) {
    return new User(name);
  }
  this.name = name;
}

const user1 = User('Kim');
const user2 = new User('Lee');

console.log(user1.name, user2.name);
```

â‘  `undefined`, Lee

â‘¡ Kim, Lee

â‘¢ Kim, `undefined`

â‘£ TypeError

<details>
  - <summary>ì •ë‹µ ë³´ê¸° </summary>
  <br />
  **ì •ë‹µ: â‘¡**
  <br />
  `new.target`ì„ ì‚¬ìš©í•˜ë©´ `new` ì—°ì‚°ì ì—†ì´ í˜¸ì¶œí•´ë„ ì¬ê·€ í˜¸ì¶œë¡œ ìƒì„±ì í•¨ìˆ˜ì²˜ëŸ¼
  ë™ì‘í•œë‹¤.
  <br />ë‘ ê²½ìš° ëª¨ë‘ ì •ìƒì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ëœë‹¤.
</details>
---

## Q6. ë¹ŒíŠ¸ì¸ ìƒì„±ì í•¨ìˆ˜

### ë‹¤ìŒ ì¤‘ `new`ì—°ì‚°ì ì—†ì´ í˜¸ì¶œí–ˆì„ ë•Œ ì›ì‹œ íƒ€ì…ì„ ë°˜í™˜í•˜ëŠ” ê²ƒì€?

â‘  `Object()`

â‘¡ `Function()`

â‘¢ `String(123)`

â‘£ `Array()`

<details>
  - <summary>ì •ë‹µ ë³´ê¸°</summary>
  <br />
  **ì •ë‹µ: â‘¢**
  <br />
  `String`, `Number`, `Boolean`ì€ `new`ì—†ì´ í˜¸ì¶œí•˜ë©´ ì›ì‹œ íƒ€ì…ì„ ë°˜í™˜í•œë‹¤.
  <br /> ì´ëŠ” ë°ì´í„° íƒ€ì… ë³€í™˜ì— í™œìš©ëœë‹¤.
</details>
